<!-- <div class="absolute top-50 left-50 translate-x-50 translate-y-50" *ngIf="isLoading">

    <p-progressSpinner [style]="{width: '100px', height: '80px'}" styleClass="custom-spinner " strokeWidth="8"
        fill="var(--surface-ground)" animationDuration=".5s"></p-progressSpinner>

</div>


<section class="">
    <div class="flex flex-wrap align-items-center justify-content-center flex-direction-column">
        <h2 class="p-3">Products</h2>
        <div class="">
            <hr class="w-1"/>

        </div>
    </div>
    <ng-container *ngIf="productsArr?.length" class="card">
        <div class="flex flex-wrap-reverse lg:flex-wrap card-container overflow-hidden">
            <p-card *ngFor="let product of productsArr; let i = index" [header]="product.name" subheader="product category"  styleClass="m-4 "  [ngClass]="{'fadeinup': i % 2 === 0, 'fadeindown': i % 2 !== 0, 'animation-duration-500':true} ">
                
                    <ng-template pTemplate="header" >
                        <img src="{{product.image}}" alt="{{product.name}}">
                     </ng-template>
                     <ng-template pTemplate="body">
                         <p>Price: {{product.price}}</p>
                         <p>count: {{product.countInStock}}</p>
                     </ng-template>
         
         
                     <ng-template pTemplate="footer">
                         <button pButton pRipple type="button" label="see more" class="p-button-raised" [routerLink]="['/products', product._id]"></button>
                     </ng-template>
          
            
            </p-card>
        </div>
    </ng-container>
</section> -->

<div class="card" *ngIf="products?.length">
    <p-dataView #dv [value]="products" [paginator]="true" [rows]="9" filterBy="name" [sortField]="sortField"
        [sortOrder]="sortOrder" layout="grid">
        <ng-template pTemplate="header">
            <div class="flex flex-column md:flex-row md:justify-content-between">
                <p-dropdown [options]="sortOptions"  placeholder="Sort By Price"
                    (onChange)="onSortChange($event)" styleClass="mb-2 md:mb-0"></p-dropdown>
                <span class="p-input-icon-left mb-2 md:mb-0">
                    <i class="pi pi-search"></i>
                    <input type="search" pInputText placeholder="Search by Name" (input)="onFilter($event)">
                </span>
                <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
            </div>
        </ng-template>
        <ng-template let-product pTemplate="listItem">
            <div class="col-12">
                <div class="product-list-item">
                    <img [src]="product.image" [alt]="product.name" class="list-img"/>
                    <div class="product-list-detail">
                        <div class="product-name">{{product.name}}</div>
                        <div class="product-description">{{product.description}}</div>
                        <p-rating [ngModel]="product.averageRating" [readonly]="true" [cancel]="false"></p-rating>
                        <i class="pi pi-tag product-category-icon"></i><span
                            class="product-category">{{product.category.name}}</span>
                    </div>
                    <div class="product-list-action">
                        <span class="product-price">${{product.price}}</span>
                        <p-button icon="pi pi-shopping-cart" label="Add to Cart"
                            [disabled]="product.countInStock === 0" (onClick)="cart(product)"></p-button>
                        <span
                            [class]="'product-badge status-' + product.countInStock">{{product.countInStock}}</span>
                    </div>
                </div>
            </div>
        </ng-template>
        <ng-template let-product pTemplate="gridItem">
            <div class="col-12 md:col-4">
                <div class="product-grid-item card">
                    <div class="product-grid-item-top">
                        <div>
                            <i class="pi pi-tag product-category-icon"></i>
                            <span class="product-category">{{product.category.name}}</span>
                        </div>
                      
                    </div>
                    <div class="product-grid-item-content">
                        <img [src]=" product.image" [alt]="product.name" class="fit" />
                        <div class="product-name">{{product.name}}</div>
                        <div class="product-description">{{product.description}}</div>
                        <p-rating [ngModel]="product.averageRating" [readonly]="true" [cancel]="false"></p-rating>
                    </div>
                    <div class="product-grid-item-bottom">
                        <span class="product-price">${{product.price}}</span>
                        <p-button icon="pi pi-shopping-cart" [disabled]="product.countInStock === 0" (onClick)="cart(product)">
                        </p-button>
                    </div>
                </div>
            </div>
        </ng-template>
    </p-dataView>
</div>